# Deployment Guide\n\nThis guide will walk you through deploying your Elite Realty website to Netlify with full CMS functionality.\n\n## Prerequisites\n\n- A GitHub, GitLab, or Bitbucket repository with your code\n- A Netlify account (free tier available)\n- Basic understanding of Git and command line\n\n## Step 1: Prepare Your Repository\n\n1. **Push your code to a Git repository**\n   ```bash\n   git add .\n   git commit -m \"Initial commit: Real estate website\"\n   git push origin main\n   ```\n\n2. **Verify your build locally**\n   ```bash\n   npm run build:netlify\n   ```\n   This should create an `out` directory with your static files.\n\n## Step 2: Deploy to Netlify\n\n### Option A: Connect via Git (Recommended)\n\n1. **Login to Netlify**\n   - Go to [netlify.com](https://netlify.com)\n   - Sign up or log in with your Git provider\n\n2. **Create a new site**\n   - Click \"New site from Git\"\n   - Choose your Git provider (GitHub, GitLab, Bitbucket)\n   - Select your repository\n\n3. **Configure build settings**\n   - **Branch to deploy**: `main` (or your default branch)\n   - **Build command**: `npm run build:netlify`\n   - **Publish directory**: `out`\n   - Click \"Deploy site\"\n\n### Option B: Manual Deploy\n\n1. **Build locally**\n   ```bash\n   npm run build:netlify\n   ```\n\n2. **Deploy to Netlify**\n   - Go to [netlify.com](https://netlify.com)\n   - Drag and drop the `out` folder to the deploy area\n\n## Step 3: Configure Environment Variables\n\n1. **Go to Site Settings**\n   - In your Netlify dashboard, click on your site\n   - Go to \"Site settings\" > \"Environment variables\"\n\n2. **Add required variables**\n   ```\n   NEXT_PUBLIC_SITE_URL = https://your-site-name.netlify.app\n   NEXT_PUBLIC_NETLIFY_IDENTITY_URL = https://your-site-name.netlify.app\n   ```\n\n3. **Redeploy**\n   - Go to \"Deploys\" tab\n   - Click \"Trigger deploy\" > \"Deploy site\"\n\n## Step 4: Set Up Netlify Identity (For CMS)\n\n1. **Enable Identity**\n   - Go to \"Site settings\" > \"Identity\"\n   - Click \"Enable Identity\"\n\n2. **Configure registration**\n   - Set \"Registration preferences\" to \"Invite only\" (recommended for security)\n   - Or allow \"Open\" registration if you want public signup\n\n3. **Enable Git Gateway**\n   - Scroll down to \"Services\"\n   - Click \"Enable Git Gateway\"\n   - This allows the CMS to commit changes to your repository\n\n4. **Configure external providers (optional)**\n   - You can enable login with Google, GitHub, etc.\n   - Go to \"External providers\" and configure as needed\n\n## Step 5: Invite CMS Users\n\n1. **Invite users**\n   - Go to \"Identity\" tab in your Netlify dashboard\n   - Click \"Invite users\"\n   - Enter email addresses for people who should have CMS access\n\n2. **User setup**\n   - Invited users will receive an email\n   - They click the link and set their password\n   - They can then access the CMS at `https://your-site.netlify.app/admin`\n\n## Step 6: Test Your Deployment\n\n1. **Check the website**\n   - Visit your Netlify URL\n   - Test navigation, search, and property listings\n   - Verify responsive design on mobile devices\n\n2. **Test the CMS**\n   - Go to `https://your-site.netlify.app/admin`\n   - Log in with an invited user account\n   - Try creating/editing a property or blog post\n   - Verify changes appear on the live site\n\n## Step 7: Custom Domain (Optional)\n\n1. **Add custom domain**\n   - Go to \"Site settings\" > \"Domain management\"\n   - Click \"Add custom domain\"\n   - Enter your domain name\n\n2. **Configure DNS**\n   - Update your domain's DNS to point to Netlify\n   - Netlify will provide the necessary records\n   - Enable HTTPS (free SSL certificate)\n\n3. **Update environment variables**\n   ```\n   NEXT_PUBLIC_SITE_URL = https://your-custom-domain.com\n   NEXT_PUBLIC_NETLIFY_IDENTITY_URL = https://your-custom-domain.com\n   ```\n\n## Troubleshooting\n\n### Build Failures\n\n**Error: \"Module not found\"**\n```bash\n# Clear cache and reinstall\nrm -rf node_modules package-lock.json\nnpm install\nnpm run build:netlify\n```\n\n**Error: \"Image optimization\"**\n- Verify `next.config.ts` has `images: { unoptimized: true }`\n- Check that you're using `next export` in your build command\n\n### CMS Issues\n\n**CMS not loading**\n- Verify Netlify Identity is enabled\n- Check that Git Gateway is configured\n- Ensure users are properly invited and confirmed\n\n**Changes not appearing**\n- Check if the build was triggered after CMS changes\n- Verify the Git Gateway has proper permissions\n- Look at deploy logs for errors\n\n### Performance Issues\n\n**Slow loading**\n- Enable asset optimization in Netlify\n- Verify images are properly optimized\n- Check for large bundle sizes\n\n**SEO concerns**\n- Verify meta tags are properly rendered\n- Test with tools like Google PageSpeed Insights\n- Ensure sitemap is generated and accessible\n\n## Advanced Configuration\n\n### Form Handling\n\nNetlify Forms are automatically detected when you add `netlify` attribute:\n\n```html\n<form name=\"contact\" method=\"POST\" data-netlify=\"true\">\n  <input type=\"hidden\" name=\"form-name\" value=\"contact\" />\n  <!-- form fields -->\n</form>\n```\n\n### Functions (Serverless)\n\n1. **Create functions directory**\n   ```bash\n   mkdir netlify/functions\n   ```\n\n2. **Add function file**\n   ```javascript\n   // netlify/functions/hello.js\n   exports.handler = async (event, context) => {\n     return {\n       statusCode: 200,\n       body: JSON.stringify({ message: \"Hello World\" })\n     }\n   }\n   ```\n\n3. **Access at**: `https://your-site.netlify.app/.netlify/functions/hello`\n\n### Redirects and Rewrites\n\nAdd to `netlify.toml`:\n\n```toml\n[[redirects]]\n  from = \"/old-path\"\n  to = \"/new-path\"\n  status = 301\n\n[[redirects]]\n  from = \"/api/*\"\n  to = \"/.netlify/functions/:splat\"\n  status = 200\n```\n\n## Monitoring and Analytics\n\n1. **Netlify Analytics**\n   - Enable in Site settings > Analytics\n   - Get insights on traffic and performance\n\n2. **Google Analytics**\n   - Add tracking ID to environment variables\n   - Include Google Analytics component in your layout\n\n3. **Error Monitoring**\n   - Set up Sentry or similar service\n   - Monitor build and runtime errors\n\n## Backup and Recovery\n\n1. **Repository backup**\n   - Your Git repository serves as your backup\n   - Consider multiple remote repositories\n\n2. **Content backup**\n   - CMS content is stored in your Git repository\n   - Regular Git backups ensure content safety\n\n3. **Database backup** (if using)\n   - Set up automated backups for any external databases\n   - Document restoration procedures\n\n## Security Considerations\n\n1. **CMS access**\n   - Use \"Invite only\" registration\n   - Regularly review user access\n   - Enable two-factor authentication\n\n2. **Environment variables**\n   - Never commit secrets to repository\n   - Use Netlify's environment variable management\n   - Rotate API keys regularly\n\n3. **HTTPS**\n   - Always use HTTPS in production\n   - Netlify provides free SSL certificates\n   - Redirect HTTP to HTTPS\n\n## Maintenance\n\n1. **Regular updates**\n   ```bash\n   npm update\n   npm audit fix\n   ```\n\n2. **Dependency monitoring**\n   - Use tools like Dependabot\n   - Monitor for security vulnerabilities\n   - Test updates in staging environment\n\n3. **Performance monitoring**\n   - Regular speed tests\n   - Monitor Core Web Vitals\n   - Optimize images and assets\n\n## Support and Resources\n\n- [Netlify Documentation](https://docs.netlify.com/)\n- [Next.js Deployment Guide](https://nextjs.org/docs/deployment)\n- [Netlify CMS Documentation](https://www.netlifycms.org/docs/)\n- [Elite Realty GitHub Issues](your-repo-url/issues)\n\n---\n\n**Need help?** Open an issue in the GitHub repository or contact the development team."